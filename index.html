<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜Ÿå…‰ç’€ç’¨ï¼Œå…±èµ´æœå¤•</title>
    <!-- å¼•å…¥ä¸­å¼ä¹¦æ³•å­—ä½“ Ma Shan Zheng -->
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
    <style>
        /* ========== å…¨å±€é‡ç½®ä¸åŸºç¡€æ ·å¼ ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Ma Shan Zheng', cursive, serif;
            overflow-x: hidden;
            min-height: 100vh;
            color: #e0d8f0;
            background: #0a0a1a;
            cursor: default;
            -webkit-tap-highlight-color: transparent;
        }

        /* ========== æ˜Ÿç©ºæ¸å˜èƒŒæ™¯ ========== */
        .starry-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(135deg, #0a0a2e 0%, #1a0a3e 25%, #0d1b3e 50%, #1a0a3e 75%, #0a0a2e 100%);
            background-size: 400% 400%;
            animation: bgFlow 20s ease infinite;
            z-index: -3;
        }

        @keyframes bgFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* ========== æ˜Ÿæ˜Ÿé—ªçƒå±‚ ========== */
        .stars-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        /* ========== ä¸­å¼æ°´å¢¨æš—çº¹å åŠ  ========== */
        .ink-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            pointer-events: none;
            opacity: 0.06;
            background-image:
                radial-gradient(ellipse at 20% 50%, rgba(100, 140, 200, 0.3) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(140, 100, 200, 0.2) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 80%, rgba(80, 120, 180, 0.25) 0%, transparent 50%);
            background-size: 100% 100%;
            /* æ°´å¢¨çº¹ç†ç”¨CSSæ¨¡æ‹Ÿ */
            filter: blur(30px);
        }

        /* é¢å¤–æ°´å¢¨ç¬”è§¦è£…é¥° */
        .ink-overlay::before {
            content: '';
            position: absolute;
            top: 10%; left: 5%;
            width: 300px; height: 300px;
            background: radial-gradient(ellipse, rgba(100, 150, 220, 0.15) 0%, transparent 70%);
            border-radius: 50% 40% 60% 30%;
            filter: blur(40px);
        }

        .ink-overlay::after {
            content: '';
            position: absolute;
            bottom: 15%; right: 10%;
            width: 250px; height: 250px;
            background: radial-gradient(ellipse, rgba(160, 120, 200, 0.12) 0%, transparent 70%);
            border-radius: 30% 60% 40% 50%;
            filter: blur(35px);
        }

        /* ========== é£˜è½èŠ±ç“£å®¹å™¨ ========== */
        .petals-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .petal {
            position: absolute;
            top: -30px;
            width: 12px;
            height: 16px;
            background: radial-gradient(ellipse at 30% 30%, rgba(150, 210, 255, 0.9), rgba(100, 170, 240, 0.5));
            border-radius: 50% 0 50% 50%;
            opacity: 0;
            animation: petalFall linear infinite;
            filter: blur(0.5px);
            box-shadow: 0 0 6px rgba(130, 200, 255, 0.3);
        }

        @keyframes petalFall {
            0% {
                opacity: 0;
                transform: translateY(0) translateX(0) rotate(0deg) scale(0.8);
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) translateX(80px) rotate(360deg) scale(0.4);
            }
        }

        /* ========== é¼ æ ‡è·Ÿéšç²’å­å®¹å™¨ ========== */
        .particle-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            animation: particleFade 1s ease-out forwards;
        }

        @keyframes particleFade {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0) translateY(-20px);
            }
        }

        /* ========== ä¸»å†…å®¹å®¹å™¨ ========== */
        .main-content {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
        }

        /* ========== æƒ…äººèŠ‚å€’è®¡æ—¶ ========== */
        .countdown-section {
            margin-top: 20px;
            text-align: center;
            animation: fadeInDown 1.5s ease;
        }

        .countdown-label {
            font-size: 1.1rem;
            color: rgba(180, 200, 240, 0.8);
            letter-spacing: 3px;
            margin-bottom: 8px;
        }

        .countdown-timer {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .countdown-item {
            background: rgba(100, 140, 220, 0.1);
            border: 1px solid rgba(130, 170, 240, 0.25);
            border-radius: 12px;
            padding: 10px 14px;
            min-width: 70px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .countdown-num {
            font-size: 1.8rem;
            color: #a0c4ff;
            text-shadow: 0 0 10px rgba(130, 180, 255, 0.5);
            display: block;
            line-height: 1.2;
        }

        .countdown-unit {
            font-size: 0.8rem;
            color: rgba(180, 200, 240, 0.6);
            letter-spacing: 2px;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ========== ä¸»æ ‡é¢˜ ========== */
        .main-title {
            margin-top: 30px;
            text-align: center;
            animation: fadeInDown 2s ease;
        }

        .main-title h1 {
            font-size: clamp(1.8rem, 5vw, 3rem);
            background: linear-gradient(135deg, #a0c4ff, #c4b5fd, #a0c4ff, #e0c3fc);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleShimmer 4s ease infinite;
            text-shadow: none;
            filter: drop-shadow(0 0 20px rgba(160, 196, 255, 0.3));
            letter-spacing: 4px;
        }

        @keyframes titleShimmer {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .main-title .subtitle {
            font-size: clamp(0.9rem, 2.5vw, 1.2rem);
            color: rgba(180, 200, 240, 0.6);
            margin-top: 8px;
            letter-spacing: 6px;
        }

        /* ========== 3Dæ—‹è½¬è“è‰²ç«ç‘°åŒºåŸŸ ========== */
        .rose-section {
            margin-top: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 800px;
            index:999;
        }

        .rose-wrapper {
            position: relative;
            width: 220px;
            height: 220px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        /* ä¸­å¼åœ†å½¢æè¾¹ */
        .rose-circle {
            position: absolute;
            width: 210px;
            height: 210px;
            border: 2px solid rgba(130, 180, 240, 0.3);
            border-radius: 50%;
            animation: circleRotate 10s linear infinite;
        }

        .rose-circle::before {
            content: '';
            position: absolute;
            top: -4px; left: 50%;
            width: 8px; height: 8px;
            background: rgba(130, 200, 255, 0.8);
            border-radius: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 10px rgba(130, 200, 255, 0.6);
        }

        .rose-circle-inner {
            position: absolute;
            width: 190px;
            height: 190px;
            border: 1px dashed rgba(180, 160, 220, 0.2);
            border-radius: 50%;
            animation: circleRotate 15s linear infinite reverse;
        }

        @keyframes circleRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* 3Dç«ç‘°èŠ± - SVGç»˜åˆ¶ */
        .rose-3d {
            position: relative;
            width: 140px;
            height: 160px;
            animation: roseFloat 4s ease-in-out infinite;
            filter: drop-shadow(0 0 25px rgba(100, 170, 255, 0.6))
                    drop-shadow(0 0 50px rgba(130, 140, 220, 0.3));
        }

        .rose-3d svg {
            width: 100%;
            height: 100%;
        }

        @keyframes roseFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-8px) scale(1.03); }
        }

        /* ç‚¹å‡»ç«ç‘°æç¤º */
        .rose-hint {
            position: absolute;
            bottom: -50px;
            font-size: 0.8rem;
            color: rgba(160, 196, 255, 0.5);
            letter-spacing: 2px;
            animation: hintPulse 2s ease infinite;
        }

        @keyframes hintPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* ========== çˆ±å¿ƒ+èŠ±ç“£çˆ†ç ´åŠ¨ç”» ========== */
        .burst-particle {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
            animation: burstAnim 1.2s ease-out forwards;
        }

        .burst-heart {
            font-size: 20px;
            color: #7ec8ff;
            text-shadow: 0 0 10px rgba(130, 200, 255, 0.6);
        }

        .burst-petal-piece {
            width: 10px;
            height: 14px;
            background: linear-gradient(135deg, rgba(130, 200, 255, 0.9), rgba(160, 140, 220, 0.7));
            border-radius: 50% 0 50% 50%;
        }

        @keyframes burstAnim {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0.3) rotate(var(--rot));
            }
        }

        /* ========== æ‰“å­—æœºæƒ…è¯åŒºåŸŸ ========== */
        .typewriter-section {
            margin-top: 50px;
            text-align: center;
            min-height: 60px;
        }

        .typewriter-text {
            font-size: clamp(1.3rem, 3.5vw, 2rem);
            color: #c4d5f7;
            letter-spacing: 4px;
            display: inline;
            text-shadow: 0 0 15px rgba(150, 190, 255, 0.3);
        }

        /* æ¯›ç¬”ç¬”è§¦å…‰æ ‡ */
        .typewriter-cursor {
            display: inline-block;
            width: 3px;
            height: 1.5em;
            background: linear-gradient(to bottom, rgba(200, 180, 140, 0.9), rgba(160, 140, 100, 0.3));
            margin-left: 4px;
            vertical-align: text-bottom;
            border-radius: 1px 1px 3px 0;
            animation: brushBlink 1s step-end infinite;
            /* æ¯›ç¬”ç¬”è§¦ï¼šé¡¶éƒ¨ç²—åº•éƒ¨ç»† */
            clip-path: polygon(0 0, 100% 0, 60% 100%, 0% 100%);
        }

        @keyframes brushBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* ========== ç£¨ç ‚ç»ç’ƒä¸­å¼å¡ç‰‡ ========== */
        .cards-section {
            margin-top: 50px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 24px;
            padding: 0 20px;
            max-width: 900px;
            width: 100%;
        }

        .glass-card {
            background: linear-gradient(165deg, rgba(25, 30, 70, 0.5), rgba(35, 25, 65, 0.45), rgba(20, 28, 60, 0.5));
            backdrop-filter: blur(18px);
            -webkit-backdrop-filter: blur(18px);
            border: 1px solid rgba(140, 140, 230, 0.12);
            border-radius: 18px;
            padding: 34px 26px 28px;
            width: 260px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transform: translateY(0);
            box-shadow:
                0 4px 20px rgba(10, 10, 40, 0.3),
                inset 0 1px 0 rgba(180, 180, 255, 0.06);
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        box-shadow 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        border-color 0.6s ease;
        }

        /* å¡ç‰‡é¡¶éƒ¨æ¸å˜è£…é¥°çº¿ */
        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 15%;
            width: 70%;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(140, 160, 255, 0.4), rgba(180, 140, 230, 0.35), rgba(140, 160, 255, 0.4), transparent);
            border-radius: 0 0 2px 2px;
        }

        /* å¡ç‰‡åº•éƒ¨å¾®å…‰ */
        .glass-card::after {
            content: '';
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 60px;
            background: radial-gradient(ellipse, rgba(130, 120, 240, 0.06) 0%, transparent 70%);
            pointer-events: none;
        }

        .glass-card:hover {
            transform: translateY(-6px);
            border-color: rgba(160, 140, 255, 0.35);
            box-shadow:
                0 0 15px rgba(140, 120, 255, 0.25),
                0 0 40px rgba(120, 100, 240, 0.15),
                0 0 80px rgba(100, 130, 255, 0.1),
                inset 0 0 25px rgba(140, 120, 255, 0.06);
            animation: cardGlow 3s ease-in-out infinite;
        }

        @keyframes cardGlow {
            0% {
                box-shadow:
                    0 0 15px rgba(140, 120, 255, 0.25),
                    0 0 40px rgba(120, 100, 240, 0.15),
                    0 0 80px rgba(100, 130, 255, 0.1),
                    inset 0 0 25px rgba(140, 120, 255, 0.06);
                border-color: rgba(160, 140, 255, 0.35);
            }
            50% {
                box-shadow:
                    0 0 20px rgba(120, 140, 255, 0.3),
                    0 0 50px rgba(150, 120, 240, 0.2),
                    0 0 90px rgba(130, 110, 255, 0.12),
                    inset 0 0 30px rgba(130, 140, 255, 0.08);
                border-color: rgba(140, 160, 255, 0.4);
            }
            100% {
                box-shadow:
                    0 0 15px rgba(140, 120, 255, 0.25),
                    0 0 40px rgba(120, 100, 240, 0.15),
                    0 0 80px rgba(100, 130, 255, 0.1),
                    inset 0 0 25px rgba(140, 120, 255, 0.06);
                border-color: rgba(160, 140, 255, 0.35);
            }
        }

        .card-icon {
            font-size: 2rem;
            margin-bottom: 14px;
            display: block;
            filter: drop-shadow(0 0 10px rgba(140, 150, 255, 0.35));
        }

        .card-title {
            font-size: 1.3rem;
            color: #c8d8f8;
            margin-bottom: 14px;
            letter-spacing: 4px;
            position: relative;
            display: inline-block;
        }

        /* æ ‡é¢˜ä¸‹æ–¹å°è£…é¥°çº¿ */
        .card-title::after {
            content: '';
            display: block;
            width: 28px;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(160, 150, 240, 0.5), transparent);
            margin: 8px auto 0;
        }

        .card-text {
            font-size: 0.95rem;
            color: rgba(190, 200, 235, 0.65);
            line-height: 1.9;
            letter-spacing: 1.5px;
        }

        /* ========== æƒŠå–œæŒ‰é’® ========== */
        .surprise-btn {
            margin-top: 50px;
            padding: 14px 40px;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 1.2rem;
            color: #c4d5f7;
            background: linear-gradient(135deg, rgba(80, 120, 200, 0.3), rgba(140, 100, 200, 0.3));
            border: 1px solid rgba(130, 180, 240, 0.3);
            border-radius: 50px;
            cursor: pointer;
            letter-spacing: 4px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .surprise-btn::before {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            width: 0; height: 0;
            background: rgba(130, 200, 255, 0.15);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.5s ease;
        }

        .surprise-btn:hover {
            border-color: rgba(130, 200, 255, 0.6);
            box-shadow: 0 0 30px rgba(100, 170, 255, 0.2), inset 0 0 20px rgba(100, 170, 255, 0.05);
            transform: scale(1.05);
        }

        .surprise-btn:hover::before {
            width: 300px; height: 300px;
        }

        /* ========== æƒŠå–œå¼¹çª—ï¼ˆæƒ…ä¹¦æ ·å¼ï¼‰ ========== */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(5, 5, 20, 0.75);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-box {
            background: linear-gradient(160deg, rgba(18, 24, 55, 0.85), rgba(25, 18, 50, 0.9));
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(140, 130, 220, 0.25);
            border-radius: 20px;
            padding: 0;
            max-width: 420px;
            width: 90%;
            text-align: center;
            transform: scale(0.85) translateY(20px);
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
            box-shadow:
                0 0 40px rgba(120, 100, 200, 0.15),
                0 0 80px rgba(100, 120, 220, 0.08),
                inset 0 1px 0 rgba(200, 190, 255, 0.1);
        }

        .modal-overlay.active .modal-box {
            transform: scale(1) translateY(0);
        }

        /* ä¿¡å°é¡¶éƒ¨è£…é¥°æ¡ */
        .modal-header-deco {
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(140, 160, 255, 0.5), rgba(180, 140, 220, 0.5), rgba(140, 160, 255, 0.5), transparent);
            margin-bottom: 0;
        }

        /* æƒ…ä¹¦å†…å®¹åŒº */
        .modal-letter {
            padding: 32px 28px 24px;
            position: relative;
            background-image: url(./iloveyou.png);
            background-size: 50%;
            background-repeat: no-repeat;
            background-position: left 40px bottom 10px;
        }

        /* å·¦ä¸Šè§’è£…é¥°èŠ±çº¹ */
        .modal-letter::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 14px;
            font-size: 1.1rem;
            opacity: 0.2;
            color: #c4b5fd;
            /* æ–°å¢ï¼šæ‰¿è½½ç¬¬äºŒå¼ å›¾ç‰‡ */
            width: 30%;
            height: 40%;
            background-image: url(./2.png);
            background-size: contain;
            background-repeat: no-repeat;
            background-position: right top;
            pointer-events: none; /* é¿å…é®æŒ¡å†…å®¹ç‚¹å‡» */

            /* æ ¸å¿ƒï¼šé€æ˜åº¦åŠ¨ç”» */
            animation: opacityChange 1s infinite alternate;
        }

        /* å³ä¸‹è§’è£…é¥°èŠ±çº¹ */
        .modal-letter::after {
            content: 'â€';
            position: absolute;
            bottom: 10px;
            left: 14px;
            font-size: 1.1rem;
            opacity: 0.2;
            color: #93c5fd;
        }
        /* å®šä¹‰é€æ˜åº¦åŠ¨ç”» */
        @keyframes opacityChange {
        0% { opacity: 0.1; }
        100% { opacity: 1; }
        }
        /* ç§°å‘¼ - å·¦ä¸Šè§’ */
        .modal-addressee {
            text-align: left;
            font-size: 1.05rem;
            color: rgba(190, 200, 240, 0.7);
            letter-spacing: 2px;
            margin-bottom: 20px;
            padding-left: 4px;
        }

        .modal-icon {
            font-size: 1.6rem;
            display: inline-block;
            margin-bottom: 16px;
            animation: modalFloat 3s ease infinite;
            filter: drop-shadow(0 0 8px rgba(140, 130, 255, 0.4));
        }

        @keyframes modalFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-6px); }
        }

        .modal-text {
            font-size: 1.3rem;
            color: #d0d8f8;
            line-height: 2.2;
            letter-spacing: 3px;
            margin-bottom: 24px;
            padding: 0 8px;
        }

        /* è½æ¬¾ - å³ä¸‹è§’ */
        .modal-signature {
            text-align: right;
            padding-right: 4px;
            margin-bottom: 20px;
        }

        .modal-signature .sig-line {
            display: block;
            font-size: 0.95rem;
            color: rgba(180, 190, 230, 0.6);
            letter-spacing: 2px;
            line-height: 1.8;
        }

        .modal-signature .sig-name {
            font-size: 1.15rem;
            color: rgba(200, 190, 240, 0.8);
            letter-spacing: 3px;
        }

        /* åˆ†éš”çº¿ */
        .modal-divider {
            width: 50px;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(160, 150, 240, 0.4), transparent);
            margin: 0 auto 20px;
        }

        .modal-close {
            padding: 10px 32px;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 1rem;
            color: rgba(190, 200, 240, 0.85);
            background: rgba(120, 110, 200, 0.12);
            border: 1px solid rgba(150, 140, 230, 0.2);
            border-radius: 30px;
            cursor: pointer;
            letter-spacing: 3px;
            transition: all 0.4s ease;
            margin-bottom: 8px;
            margin-top: 8px;
        }

        .modal-close:hover {
            background: rgba(130, 120, 220, 0.25);
            border-color: rgba(160, 150, 240, 0.45);
            box-shadow: 0 0 20px rgba(140, 130, 240, 0.15);
        }

        /* åº•éƒ¨è£…é¥°æ¡ */
        .modal-footer-deco {
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(140, 160, 255, 0.3), rgba(180, 140, 220, 0.3), rgba(140, 160, 255, 0.3), transparent);
        }

        /* ========== é•¿æŒ‰å½©è›‹åŒºåŸŸ ========== */
        .easter-egg-zone {
            margin-top: 50px;
            padding: 20px 30px;
            text-align: center;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            position: relative;
        }

        .easter-egg-hint {
            font-size: 0.9rem;
            color: rgba(160, 180, 220, 0.4);
            letter-spacing: 3px;
            transition: color 0.3s ease;
        }

        .easter-egg-hint:hover {
            color: rgba(160, 180, 220, 0.6);
        }

        .easter-egg-content {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            z-index: 3000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            /* æ—‹è½¬ç‚«å…‰è¾¹æ¡†å®¹å™¨ */
            padding: 2px;
            border-radius: 22px;
            background: rgba(15, 20, 50, 0.6);
            max-width: 380px;
            width: 85%;
        }

        .easter-egg-content.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
        }

        /* æ—‹è½¬ç‚«å…‰è¾¹æ¡† */
        .easter-egg-content::before {
            content: '';
            position: absolute;
            top: -1px; left: -1px;
            right: -1px; bottom: -1px;
            border-radius: 22px;
            background: conic-gradient(
                from var(--egg-angle, 0deg),
                transparent 0%,
                rgba(140, 130, 255, 0.5) 10%,
                rgba(100, 180, 255, 0.3) 20%,
                transparent 30%,
                transparent 50%,
                rgba(180, 140, 240, 0.4) 60%,
                rgba(120, 160, 255, 0.3) 70%,
                transparent 80%
            );
            z-index: -1;
            animation: eggBorderSpin 4s linear infinite;
        }

        @keyframes eggBorderSpin {
            to { --egg-angle: 360deg; }
        }

        /* æ³¨å†Œè‡ªå®šä¹‰å±æ€§ä»¥æ”¯æŒåŠ¨ç”» */
        @property --egg-angle {
            syntax: '<angle>';
            initial-value: 0deg;
            inherits: false;
        }

        /* å¤–å±‚å…‰æ™•ï¼ˆé™æ€box-shadow + opacityå‘¼å¸ï¼ŒGPUå‹å¥½ï¼‰ */
        .easter-egg-content::after {
            content: '';
            position: absolute;
            top: -6px; left: -6px;
            right: -6px; bottom: -6px;
            border-radius: 26px;
            box-shadow:
            /* å†…é˜´å½±ï¼šå‘å†…æ”¶ç¼© 2pxï¼Œä¿ç•™åŸæœ‰æ¨¡ç³Š/é€æ˜åº¦ */
            inset 0 0 20px 2px rgba(140, 130, 255, 0.15),
            inset 0 0 50px 2px rgba(120, 140, 255, 0.08),
            /* å¦‚éœ€ä¿ç•™åŸæœ‰å¤–é˜´å½±ï¼Œå¯ä¿ç•™è¿™ä¸¤è¡Œï¼ˆå¯é€‰ï¼‰ */
            0 0 20px rgba(140, 130, 255, 0.15),
            0 0 50px rgba(120, 140, 255, 0.08);
            z-index: -2;
            animation: eggGlowPulse 3s ease-in-out infinite alternate;
            will-change: opacity;
        }

        @keyframes eggGlowPulse {
            0% { opacity: 0.6; }
            100% { opacity: 1; }
        }

        /* å†…å®¹åŒº */
        .easter-egg-inner {
            background: linear-gradient(160deg, rgba(15, 18, 48, 0.92), rgba(22, 16, 45, 0.95));
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border-radius: 20px;
            padding: 36px 30px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        /* å†…éƒ¨å¾®å…‰æ•ˆæœï¼ˆä»…åŠ¨ç”»opacityï¼ŒGPUåŠ é€Ÿæµç•…ï¼‰ */
        .easter-egg-inner::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background:
                radial-gradient(circle at 20% 30%, rgba(140, 130, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(100, 170, 255, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 50% 10%, rgba(180, 140, 240, 0.06) 0%, transparent 40%);
            pointer-events: none;
            animation: innerShimmer 4s ease-in-out infinite alternate;
            will-change: opacity;
        }

        @keyframes innerShimmer {
            0% { opacity: 0.4; }
            100% { opacity: 1; }
        }

        /* å¤å…¸è§’èŠ±è£…é¥° - å·¦ä¸Š */
        .egg-corner-tl, .egg-corner-tr, .egg-corner-bl, .egg-corner-br {
            position: absolute;
            width: 24px;
            height: 24px;
            opacity: 0.25;
            color: #c4b5fd;
            pointer-events: none;
        }
        .egg-corner-tl { top: 10px; left: 12px; }
        .egg-corner-tr { top: 10px; right: 12px; transform: scaleX(-1); }
        .egg-corner-bl { bottom: 10px; left: 12px; transform: scaleY(-1); }
        .egg-corner-br { bottom: 10px; right: 12px; transform: scale(-1, -1); }

        .egg-corner-tl::before, .egg-corner-tr::before,
        .egg-corner-bl::before, .egg-corner-br::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 18px; height: 1px;
            background: linear-gradient(90deg, rgba(180, 170, 240, 0.6), transparent);
        }
        .egg-corner-tl::after, .egg-corner-tr::after,
        .egg-corner-bl::after, .egg-corner-br::after {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 1px; height: 18px;
            background: linear-gradient(180deg, rgba(180, 170, 240, 0.6), transparent);
        }

        /* é¡¶éƒ¨è£…é¥°å›¾æ ‡ */
        .egg-top-icon {
            font-size: 1.4rem;
            display: block;
            margin-bottom: 16px;
            filter: drop-shadow(0 0 12px rgba(140, 130, 255, 0.5));
            animation: eggIconFloat 3s ease-in-out infinite;
        }

        @keyframes eggIconFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-4px) scale(1.05); }
        }

        .easter-egg-text {
            font-size: 1.3rem;
            color: #d0d8f8;
            line-height: 2.4;
            letter-spacing: 3px;
            margin-bottom: 6px;
            position: relative;
        }

        /* æ–‡å­—ä¸Šä¸‹è£…é¥°çº¿ */
        .egg-text-line {
            display: block;
            width: 40px;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(160, 150, 240, 0.45), transparent);
            margin: 12px auto;
        }

        .easter-egg-deco {
            margin-top: 8px;
            font-size: 0.85rem;
            color: rgba(180, 170, 230, 0.4);
            letter-spacing: 4px;
        }

        /* ========== éŸ³ä¹æ§åˆ¶æŒ‰é’® ========== */
        .music-btn {
            position: fixed;
            top: 16px;
            right: 16px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: rgba(30, 40, 80, 0.4);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(130, 180, 240, 0.25);
            color: #a0c4ff;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 5000;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }

        .music-btn:hover {
            background: rgba(50, 60, 100, 0.5);
            border-color: rgba(130, 200, 255, 0.5);
            box-shadow: 0 0 15px rgba(100, 170, 255, 0.2);
        }

        .music-icon {
            animation: musicSpin 2s linear infinite;
            animation-play-state: paused;
        }

        .music-btn.playing .music-icon {
            animation-play-state: running;
        }

        @keyframes musicSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ========== åº•éƒ¨è£…é¥° ========== */
        .footer-deco {
            margin-top: 60px;
            margin-bottom: 40px;
            text-align: center;
            opacity: 0.4;
        }

        .footer-deco .line {
            display: inline-block;
            width: 60px;
            height: 1px;
            background: linear-gradient(to right, transparent, rgba(130, 180, 240, 0.5), transparent);
            vertical-align: middle;
            margin: 0 12px;
        }

        .footer-deco .dot {
            font-size: 0.6rem;
            color: rgba(130, 180, 240, 0.6);
        }

        .footer-text {
            margin-top: 10px;
            font-size: 0.85rem;
            color: rgba(160, 180, 220, 0.3);
            letter-spacing: 4px;
        }

        /* ========== å“åº”å¼é€‚é… ========== */
        @media (max-width: 768px) {
            .cards-section {
                flex-direction: column;
                align-items: center;
            }

            .glass-card {
                width: 90%;
                max-width: 320px;
            }

            .countdown-item {
                min-width: 60px;
                padding: 8px 10px;
            }

            .countdown-num {
                font-size: 1.5rem;
            }

            .rose-wrapper {
                width: 180px;
                height: 180px;
            }

            .rose-circle {
                width: 170px;
                height: 170px;
            }

            .rose-circle-inner {
                width: 155px;
                height: 155px;
            }

            .rose-3d {
                width: 100px;
                height: 100px;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 10px;
            }

            .countdown-item {
                min-width: 55px;
                padding: 6px 8px;
            }

            .surprise-btn {
                padding: 12px 30px;
                font-size: 1.1rem;
            }
        }

        /* ========== åŠ è½½åŠ¨ç”» ========== */
        .page-loader {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #0a0a1a;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease;
        }

        .page-loader.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader-text {
            font-size: 1.5rem;
            color: #a0c4ff;
            letter-spacing: 6px;
            animation: loaderPulse 1.5s ease infinite;
        }

        @keyframes loaderPulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>

    <!-- é¡µé¢åŠ è½½åŠ¨ç”» -->
    <div class="page-loader" id="pageLoader">
        <span class="loader-text">è“ç«æ˜ æ˜Ÿæ²³...</span>
    </div>

    <!-- æ˜Ÿç©ºæ¸å˜èƒŒæ™¯ -->
    <div class="starry-bg"></div>

    <!-- æ˜Ÿæ˜Ÿé—ªçƒç”»å¸ƒ -->
    <canvas class="stars-canvas" id="starsCanvas"></canvas>

    <!-- ä¸­å¼æ°´å¢¨æš—çº¹ -->
    <div class="ink-overlay"></div>

    <!-- é£˜è½èŠ±ç“£å®¹å™¨ -->
    <div class="petals-container" id="petalsContainer"></div>

    <!-- é¼ æ ‡è·Ÿéšç²’å­å®¹å™¨ -->
    <div class="particle-container" id="particleContainer"></div>

    <!-- èƒŒæ™¯éŸ³ä¹ - å¯æ›¿æ¢ä¸ºå…¶ä»–å…è´¹éŸ³ä¹å¤–é“¾ -->
    <audio id="bgMusic" loop preload="auto">
        <source src="./mp3/ä¸ƒé‡Œé¦™.mp3" type="audio/mpeg">
    </audio>

    <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
    <button class="music-btn" id="musicBtn" title="èƒŒæ™¯éŸ³ä¹">
        <span class="music-icon">â™ª</span>
    </button>

    <!-- ä¸»å†…å®¹ -->
    <div class="main-content">

        <!-- æƒ…äººèŠ‚å€’è®¡æ—¶ -->
        <section class="countdown-section">
            <div class="countdown-label">â€” è·ç¦»æƒ…äººèŠ‚ â€”</div>
            <div class="countdown-timer" id="countdownTimer">
                <div class="countdown-item">
                    <span class="countdown-num" id="cdDays">0</span>
                    <span class="countdown-unit">å¤©</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-num" id="cdHours">0</span>
                    <span class="countdown-unit">æ—¶</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-num" id="cdMins">0</span>
                    <span class="countdown-unit">åˆ†</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-num" id="cdSecs">0</span>
                    <span class="countdown-unit">ç§’</span>
                </div>
            </div>
        </section>

        <!-- ä¸»æ ‡é¢˜ - å¯ä¿®æ”¹æ–‡æ¡ˆ -->
        <section class="main-title">
            <h1>æ˜Ÿå…‰ç’€ç’¨ï¼Œå…±èµ´æœå¤•</h1>
            <div class="subtitle">é’è¡¿å¯„æƒ… Â· è“ç«äºˆä½ </div>
        </section>

        <!-- 3Dæ—‹è½¬è“è‰²ç«ç‘° -->
        <section class="rose-section">
            <div class="rose-wrapper" id="roseWrapper">
                <div class="rose-circle"></div>
                <div class="rose-circle-inner"></div>
                <div class="rose-3d" id="rose3d">
                    <svg viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <radialGradient id="rg1" cx="50%" cy="40%"><stop offset="0%" stop-color="#c7e2ff"/><stop offset="100%" stop-color="#4a8ee6"/></radialGradient>
                            <radialGradient id="rg2" cx="50%" cy="40%"><stop offset="0%" stop-color="#a8d4ff"/><stop offset="100%" stop-color="#5b6abf"/></radialGradient>
                            <radialGradient id="rg3" cx="50%" cy="40%"><stop offset="0%" stop-color="#b8e0ff"/><stop offset="100%" stop-color="#6e7fd9"/></radialGradient>
                            <radialGradient id="rg4" cx="50%" cy="50%"><stop offset="0%" stop-color="#dbeeff"/><stop offset="100%" stop-color="#7baae8"/></radialGradient>
                            <radialGradient id="rg5" cx="50%" cy="40%"><stop offset="0%" stop-color="#e8f4ff"/><stop offset="100%" stop-color="#90b8f0"/></radialGradient>
                            <radialGradient id="rgCore" cx="50%" cy="50%"><stop offset="0%" stop-color="#f0f7ff"/><stop offset="60%" stop-color="#c4dcf8"/><stop offset="100%" stop-color="#8ab4e8"/></radialGradient>
                            <filter id="roseGlow"><feGaussianBlur stdDeviation="1.5" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                        </defs>
                        <!-- èŠ±èŒ -->
                        <path d="M100 158 Q99 180 97 210 Q96 235 97 255" stroke="#4ade80" stroke-width="3" fill="none" opacity="0.65"/>
                        <!-- å¶å­ -->
                        <path d="M97 195 Q82 185 72 190 Q80 180 97 188" fill="#4ade80" opacity="0.45"/>
                        <path d="M97 218 Q112 210 120 214 Q110 220 97 215" fill="#4ade80" opacity="0.45"/>
                        <!-- èŠ±è¼ -->
                        <path d="M92 158 Q87 150 82 156 Q89 153 96 160" fill="#34d399" opacity="0.55"/>
                        <path d="M108 158 Q113 150 118 156 Q111 153 104 160" fill="#34d399" opacity="0.55"/>
                        <path d="M100 156 Q100 148 100 155" stroke="#34d399" stroke-width="2" fill="none" opacity="0.4"/>

                        <!-- === èŠ±æœµå®å¿ƒåº•è‰²ï¼ˆæ¶ˆé™¤æ‰€æœ‰ç¼éš™ï¼‰ === -->
                        <ellipse cx="100" cy="105" rx="52" ry="50" fill="#5a8fd4" opacity="1"/>

                        <!-- === å¤–å±‚èŠ±ç“£ï¼ˆ5ç‰‡ï¼Œå¤§è€Œåœ†æ¶¦ï¼‰ === -->
                        <path d="M100 60 Q125 45 145 60 Q160 80 150 110 Q140 135 115 145 Q100 130 100 100 Z" fill="url(#rg1)" filter="url(#roseGlow)"/>
                        <path d="M100 60 Q75 45 55 60 Q40 80 50 110 Q60 135 85 145 Q100 130 100 100 Z" fill="url(#rg2)" filter="url(#roseGlow)"/>
                        <path d="M55 75 Q38 95 45 120 Q55 148 85 155 Q95 140 90 115 Q85 90 70 75 Z" fill="url(#rg3)" filter="url(#roseGlow)"/>
                        <path d="M145 75 Q162 95 155 120 Q145 148 115 155 Q105 140 110 115 Q115 90 130 75 Z" fill="url(#rg1)" filter="url(#roseGlow)"/>
                        <path d="M65 60 Q50 70 48 95 Q48 120 65 140 Q80 148 95 140 Q85 120 78 95 Q72 72 75 60 Z" fill="url(#rg2)" opacity="0.9"/>

                        <!-- === ä¸­å±‚èŠ±ç“£ï¼ˆ4ç‰‡ï¼Œç¨å°ï¼Œè¦†ç›–å†…éƒ¨ï¼‰ === -->
                        <path d="M100 70 Q120 62 135 78 Q145 100 130 130 Q115 145 100 135 Q100 115 100 95 Z" fill="url(#rg4)" opacity="0.92"/>
                        <path d="M100 70 Q80 62 65 78 Q55 100 70 130 Q85 145 100 135 Q100 115 100 95 Z" fill="url(#rg3)" opacity="0.92"/>
                        <path d="M60 90 Q55 110 65 130 Q78 148 100 140 Q95 125 88 108 Q80 92 68 85 Z" fill="url(#rg5)" opacity="0.88"/>
                        <path d="M140 90 Q145 110 135 130 Q122 148 100 140 Q105 125 112 108 Q120 92 132 85 Z" fill="url(#rg4)" opacity="0.88"/>

                        <!-- === å†…å±‚èŠ±ç“£ï¼ˆ4ç‰‡ï¼Œç´§å¯†åŒ…è£¹ä¸­å¿ƒï¼‰ === -->
                        <path d="M100 80 Q115 78 125 92 Q130 110 118 130 Q108 138 100 130 Q100 112 100 95 Z" fill="url(#rg5)" opacity="0.93"/>
                        <path d="M100 80 Q85 78 75 92 Q70 110 82 130 Q92 138 100 130 Q100 112 100 95 Z" fill="url(#rg4)" opacity="0.93"/>
                        <path d="M78 95 Q72 108 78 125 Q88 138 100 132 Q96 120 92 108 Q88 98 82 92 Z" fill="url(#rg5)" opacity="0.9"/>
                        <path d="M122 95 Q128 108 122 125 Q112 138 100 132 Q104 120 108 108 Q112 98 118 92 Z" fill="url(#rg4)" opacity="0.9"/>

                        <!-- === èŠ±è•Šå·æ›²ï¼ˆèºæ—‹å½¢ï¼Œå¡«æ»¡ä¸­å¿ƒï¼‰ === -->
                        <path d="M100 88 Q110 86 115 98 Q118 112 108 125 Q100 130 100 118 Q100 105 100 95 Z" fill="#d4e8fc" opacity="0.94"/>
                        <path d="M100 88 Q90 86 85 98 Q82 112 92 125 Q100 130 100 118 Q100 105 100 95 Z" fill="#ddeeff" opacity="0.94"/>
                        <path d="M95 95 Q88 105 92 118 Q97 128 100 122 Q98 112 96 102 Z" fill="#e6f1ff" opacity="0.92"/>
                        <path d="M105 95 Q112 105 108 118 Q103 128 100 122 Q102 112 104 102 Z" fill="#e0edff" opacity="0.92"/>

                        <!-- === èŠ±è•Šä¸­å¿ƒï¼ˆå®å¿ƒï¼Œæœ€äº®ï¼‰ === -->
                        <ellipse cx="100" cy="110" rx="12" ry="14" fill="url(#rgCore)" opacity="0.95"/>
                        <ellipse cx="100" cy="108" rx="7" ry="8" fill="#f0f7ff" opacity="0.9"/>
                        <ellipse cx="100" cy="107" rx="3" ry="4" fill="#ffffff" opacity="0.7"/>
                    </svg>
                </div>
                <span class="rose-hint">è½»è§¦ç«ç‘°ï¼Œç»½æ”¾å¿ƒæ„</span>
            </div>
        </section>

        <!-- è¯—å¥ç¯ç»• -->
        <link rel="stylesheet" href="wordsky.css">
        <div class="container"></div>
        <script src="wordsky.js"></script>

        <!-- æ‰“å­—æœºæƒ…è¯ -->
        <section class="typewriter-section">
            <span class="typewriter-text" id="typewriterText"></span>
            <span class="typewriter-cursor"></span>
        </section>

        <!-- ç£¨ç ‚ç»ç’ƒä¸­å¼å¡ç‰‡ - å¯ä¿®æ”¹æ–‡æ¡ˆ -->
        <section class="cards-section">
            <div class="glass-card">
                <span class="card-icon">ğŸŒ™</span>
                <div class="card-title">ç¬ªæœˆæ –æ€</div>
                <div class="card-text">æœˆè½æ˜Ÿæ²‰å¤„ï¼Œçš†æ˜¯å¿µä½ æ—¶ã€‚<br>æ„¿åŒ–æ¸…é£ï¼Œé•¿ä¼´å›ä¾§ã€‚</div>
            </div>
            <div class="glass-card">
                <span class="card-icon">ğŸ”ï¸</span>
                <div class="card-title">é¸£å±±æµ·èª“</div>
                <div class="card-text">å¿ƒæ‚¦å›å…®ï¼Œå±±æµ·çš†å¬ã€‚<br>è“ç«ä¸ºèª“ï¼Œå±±æµ·å¯å¹³ã€‚</div>
            </div>
            <div class="glass-card">
                <span class="card-icon">ğŸ</span>
                <div class="card-title">ç’¨é“ƒè¯‰è¡·</div>
                <div class="card-text">é£è¿‡æªé“ƒå“ï¼Œå£°å£°çš†æ˜¯ä½ ã€‚<br>å¿µä½ æ— æ­‡ï¼Œå››å­£ä¸å€¦ã€‚</div>
            </div>
        </section>

        <!-- æƒŠå–œæŒ‰é’® -->
        <button class="surprise-btn" id="surpriseBtn">
            âœ¦ å¯å°ä¸€å°æƒ…ä¹¦ âœ¦
        </button>

        <!-- é•¿æŒ‰å½©è›‹åŒºåŸŸ -->
        <div class="easter-egg-zone" id="easterEggZone">
            <div class="easter-egg-hint">ã€Œ é•¿æŒ‰æ­¤å¤„ï¼Œè†å¬å¿ƒå£° ã€</div>
        </div>

        <!-- åº•éƒ¨è£…é¥° -->
        <div class="footer-deco">
            <span class="line"></span>
            <span class="dot">â—†</span>
            <span class="line"></span>
            <div class="footer-text">å¿ƒæ‚¦å›å…® Â· å¿µä½ æ— æ­‡</div>
        </div>
    </div>

    <!-- æƒŠå–œå¼¹çª—ï¼ˆæƒ…ä¹¦æ ·å¼ï¼‰ -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-box">
            <div class="modal-header-deco"></div>
            <div class="modal-letter">
                <!-- ç§°å‘¼ - å·¦ä¸Šè§’ï¼Œå¯ä¿®æ”¹ -->
                <div class="modal-addressee">è‡´å¿ƒä¸Šäºº Â· ç¬ªé¸£ç’¨</div>
                <span class="modal-icon">ğŸ’Œ</span>
                <!-- å¼¹çª—æƒ…è¯ - å¯ä¿®æ”¹æ–‡æ¡ˆ -->
                <div class="modal-text" id="modalText">
                    æµ®ä¸–ä¸‰åƒï¼Œ<br>å¾çˆ±æœ‰ä¸‰ï¼š<br>æ—¥ã€æœˆä¸å¿ã€‚<br>æ—¥ä¸ºæœï¼Œæœˆä¸ºæš®ï¼Œ<br>å¿ä¸ºæœæœæš®æš®ã€‚
                </div>
                <div class="modal-divider"></div>
                <!-- è½æ¬¾ - å³ä¸‹è§’ï¼Œå¯ä¿®æ”¹ -->
                <div class="modal-signature">
                    <span class="sig-line">æ‰§ç¬”å¯„æƒ…</span>
                    <span class="sig-line sig-name">æ›¹è‹±ä¿Š</span>
                </div>
            </div>
            <div class="modal-footer-deco"></div>
            <div style="padding: 0 28px 24px; text-align: center;">
                <button class="modal-close" id="modalClose">çŸ¥æ‚‰ Â· çè—äºå¿ƒ</button>
            </div>
        </div>
    </div>

    <!-- é•¿æŒ‰å½©è›‹å†…å®¹ -->
    <div class="easter-egg-content" id="easterEggContent">
        <div class="easter-egg-inner">
            <!-- å››è§’å¤å…¸è£…é¥° -->
            <div class="egg-corner-tl"></div>
            <div class="egg-corner-tr"></div>
            <div class="egg-corner-bl"></div>
            <div class="egg-corner-br"></div>
            <!-- é¡¶éƒ¨å›¾æ ‡ -->
            <span class="egg-top-icon">ğŸª·</span>
            <span class="egg-text-line"></span>
            <div class="easter-egg-text">
                è§å±±æ˜¯å±±ï¼Œè§æµ·æ˜¯æµ·ï¼Œè§ä½ æ˜¯å…¨ä¸–ç•Œ<br>
                å¾€åä½™ç”Ÿï¼Œå››å­£ä¸ä½ 
            </div>
            <span class="egg-text-line"></span>
            <div class="easter-egg-deco">â€” å¿ƒæœ‰æ‰€å¿µ Â· å¿…æœ‰å›å“ â€”</div>
        </div>
    </div>

    <script>
        /* ========================================
         *  å…¨å±€å˜é‡ä¸é…ç½® - å¯åœ¨æ­¤ä¿®æ”¹æ–‡æ¡ˆ
         * ======================================== */

        // æ‰“å­—æœºæƒ…è¯åˆ—è¡¨ - å¯ä¿®æ”¹/å¢åŠ 
        const typewriterPhrases = [
            "æ¸©é…’ç…®èŒ¶ï¼Œä¸ä½ å²å²",
            "å¿ƒæ‚¦äºä½ ï¼Œæ— é—®è¥¿ä¸œ",
            "åˆè§äº¦ä¹æ¬¢ï¼Œä¹…å¤„äº¦æ€¦ç„¶",
            "å—æ–¹æœ‰å˜‰æœ¨ï¼ŒåŒ—æ–¹æœ‰ç›¸æ€",
            "æ—¥æœˆæ˜Ÿè¾°ï¼Œä¸åŠä½ ",
            "ä¸æ—©ä¸æ™šï¼Œåˆšå¥½æ˜¯ä½ ",
            "å¥½å¥½ç”Ÿæ´»ï¼Œæ…¢æ…¢çˆ±ä½ ",
            "æƒ…ä¸çŸ¥æ‰€èµ·ï¼Œä¸€å¾€è€Œæ·±",
            "æ•…äº‹å¾ˆé•¿ï¼Œä¸€ç”Ÿå¾ˆçŸ­"
        ];

        // æƒŠå–œå¼¹çª—æƒ…è¯åˆ—è¡¨ - éšæœºæ˜¾ç¤ºä¸€å¥
        const surpriseTexts = [
            "æµ®ä¸–ä¸‰åƒï¼Œ<br>å¾çˆ±æœ‰ä¸‰ï¼š<br>æ—¥ã€æœˆä¸å¿ã€‚<br>æ—¥ä¸ºæœï¼Œæœˆä¸ºæš®ï¼Œ<br>å¿ä¸ºæœæœæš®æš®ã€‚",
            "ä¸ä½ å…±åº¦çš„æ¯ä¸€ç§’ï¼Œ<br>éƒ½æ˜¯æ—¶å…‰èµ äºˆæˆ‘çš„ï¼Œ<br>æœ€çè´µçš„ç¤¼ç‰©ã€‚",
            "æ˜¥æ°´åˆç”Ÿï¼Œæ˜¥æ—åˆç››ï¼Œ<br>æ˜¥é£åé‡Œï¼Œä¸å¦‚ä½ ã€‚<br>è“ç«ä¸€æœµï¼Œ<br>èƒœå´äººé—´æ— æ•°ã€‚",
            "é‡è§ä½ çš„é‚£ä¸€åˆ»ï¼Œ<br>ä¼¼å®‡å®™å¤§çˆ†ç‚¸çš„å¥‡ç‚¹ï¼Œ<br>è‡ªæ­¤æ—¶é—´å¼€å§‹ï¼Œ<br>ä¸‡ç‰©ç”Ÿè¾‰ã€‚",
            "æ„¿å°†ä¸–é—´æ‰€æœ‰ç¾å¥½ï¼Œ<br>ä¸ä½ ä¸€åŒåˆ†äº«ï¼Œ<br>ç›´åˆ°æ°¸è¿œã€‚",
            "è®©æ—¶é—´è¯æ˜ï¼Œ<br>æˆ‘ä»¬çš„çˆ±ä¸æ˜¯ä¸€æ—¶å…´èµ·ï¼Œ<br>è€Œæ˜¯é™ªä¼´åˆ°åº•ã€‚",
            "æ˜¯å¾®é£ï¼Œæ˜¯æ™šéœï¼Œ<br>æ˜¯å¿ƒè·³ï¼Œæ˜¯æ— å¯æ›¿ä»£ã€‚",
            "äººç”Ÿï¼Œç¼˜å§‹äºâ€œé‡è§â€ï¼Œ<br>æƒ…é•¿äºâ€œé™ªä¼´â€ï¼Œ<br>é™ªä¼´æ˜¯æˆ‘èƒ½ç»™ä½ æœ€å¥½çš„ç¤¼ç‰©ã€‚",
            "çˆ±æƒ…ä¸æ˜¯å¯»æ‰¾ä¸€ä¸ªå®Œç¾çš„äººï¼Œ<br>è€Œæ˜¯å­¦ä¼šç”¨å®Œç¾çš„çœ¼å…‰çœ‹å¾…ä¸å®Œç¾çš„äººã€‚",
            "æœ€ç¾å¥½çš„çˆ±æƒ…ï¼Œ<br>ä¸æ˜¯ç«ç‘°ä¸æƒŠå–œï¼Œ<br>è€Œæ˜¯ä½ æ¥äº†ä»¥åï¼Œ<br>å†ä¹Ÿæ²¡èµ°ã€‚"
        ];

        // æƒ…äººèŠ‚ç›®æ ‡æ—¥æœŸ - 2026å¹´2æœˆ14æ—¥
        const valentineDate = new Date('2026-02-14T00:00:00');

        /* ========================================
         *  é¡µé¢åŠ è½½å®Œæˆ
         * ======================================== */
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('pageLoader').classList.add('hidden');
            }, 1200);

            initStars();
            initPetals();
            initTypewriter();
            initCountdown();
            initParticles();
            initSurprise();
            initEasterEgg();
            initRoseClick();
            initMusic();
            initCardSounds();
        });

        /* ========================================
         *  æ˜Ÿæ˜Ÿé—ªçƒæ•ˆæœ
         * ======================================== */
        function initStars() {
            const canvas = document.getElementById('starsCanvas');
            const ctx = canvas.getContext('2d');
            let stars = [];
            let shootingStars = [];
            const STAR_COUNT = 250;

            function resize() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                // é‡æ–°åˆ†å¸ƒæ˜Ÿæ˜Ÿä½ç½®
                stars.forEach(s => {
                    s.x = Math.random() * canvas.width;
                    s.y = Math.random() * canvas.height;
                });
            }
            resize();
            window.addEventListener('resize', resize);

            // åˆ›å»ºæ˜Ÿæ˜Ÿ - ä¸åŒç±»å‹æœ‰ä¸åŒé—ªçƒè¡Œä¸º
            for (let i = 0; i < STAR_COUNT; i++) {
                const r = Math.random();
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    baseSize: Math.random() * 2.2 + 0.4,
                    maxOpacity: 0.3 + Math.random() * 0.7,
                    // é—ªçƒé€Ÿåº¦ï¼šå¿«ä¸­æ…¢ä¸‰æ¡£ï¼Œè®©æ˜Ÿç©ºæœ‰å±‚æ¬¡æ„Ÿ
                    twinkleSpeed: r < 0.3 ? (1.5 + Math.random() * 2) : r < 0.7 ? (3 + Math.random() * 3) : (5 + Math.random() * 4),
                    phase: Math.random() * Math.PI * 2,
                    // éšæœºé—ªçƒåç§»ï¼Œè®©æ¯é¢—æ˜Ÿç‹¬ç«‹
                    flickerTimer: Math.random() * 1000,
                    // æ˜¯å¦ä¼šçªç„¶é—ªäº®
                    canFlash: Math.random() < 0.15,
                    flashTime: 0,
                    // é¢œè‰²
                    r: Math.random() > 0.5 ? (150 + Math.random()*60) : (180 + Math.random()*40),
                    g: Math.random() > 0.5 ? (190 + Math.random()*50) : (160 + Math.random()*40),
                    b: Math.random() > 0.5 ? 255 : (220 + Math.random()*35)
                });
            }

            // å¶å°”äº§ç”Ÿæµæ˜Ÿ
            function spawnShootingStar() {
                shootingStars.push({
                    x: Math.random() * canvas.width * 0.8,
                    y: Math.random() * canvas.height * 0.3,
                    len: 60 + Math.random() * 80,
                    speed: 4 + Math.random() * 4,
                    angle: Math.PI / 4 + (Math.random() - 0.5) * 0.3,
                    life: 1.0
                });
                // ä¸‹ä¸€é¢—æµæ˜Ÿé—´éš” 4~10ç§’
                setTimeout(spawnShootingStar, 4000 + Math.random() * 6000);
            }
            setTimeout(spawnShootingStar, 2000);

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                const time = Date.now() * 0.001;

                stars.forEach(star => {
                    // å¤šå±‚æ­£å¼¦å åŠ ï¼Œäº§ç”Ÿè‡ªç„¶é—ªçƒ
                    const t1 = Math.sin(time * star.twinkleSpeed + star.phase);
                    const t2 = Math.sin(time * star.twinkleSpeed * 0.7 + star.phase * 1.3);
                    let twinkle = (t1 * 0.5 + t2 * 0.3 + 0.8) * 0.6;
                    twinkle = Math.max(0.05, Math.min(1, twinkle));

                    // éšæœºçªç„¶é—ªäº®æ•ˆæœ
                    let flashBoost = 0;
                    if (star.canFlash) {
                        if (star.flashTime <= 0 && Math.random() < 0.002) {
                            star.flashTime = 0.4 + Math.random() * 0.3;
                        }
                        if (star.flashTime > 0) {
                            flashBoost = Math.sin(star.flashTime * Math.PI / 0.7) * 0.6;
                            star.flashTime -= 0.016;
                        }
                    }

                    const alpha = Math.min(1, star.maxOpacity * twinkle + flashBoost);
                    const size = star.baseSize * (0.8 + twinkle * 0.4 + flashBoost * 0.5);

                    // ç”»æ˜Ÿæ˜Ÿæ ¸å¿ƒ
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(${star.r}, ${star.g}, ${star.b}, ${alpha})`;
                    ctx.fill();

                    // è¾ƒå¤§çš„æ˜Ÿæ˜Ÿç”»åå­—å…‰èŠ’
                    if (size > 1.8 || flashBoost > 0.2) {
                        const glowAlpha = alpha * 0.4;
                        const glowLen = size * 3;
                        ctx.strokeStyle = `rgba(${star.r}, ${star.g}, ${star.b}, ${glowAlpha})`;
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(star.x - glowLen, star.y);
                        ctx.lineTo(star.x + glowLen, star.y);
                        ctx.moveTo(star.x, star.y - glowLen);
                        ctx.lineTo(star.x, star.y + glowLen);
                        ctx.stroke();
                    }

                    // å…‰æ™•
                    if (size > 1.5) {
                        ctx.beginPath();
                        ctx.arc(star.x, star.y, size * 2.5, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(${star.r}, ${star.g}, ${star.b}, ${alpha * 0.1})`;
                        ctx.fill();
                    }
                });

                // ç»˜åˆ¶æµæ˜Ÿ
                shootingStars.forEach((ss, idx) => {
                    const dx = Math.cos(ss.angle) * ss.speed;
                    const dy = Math.sin(ss.angle) * ss.speed;
                    ss.x += dx;
                    ss.y += dy;
                    ss.life -= 0.012;

                    if (ss.life > 0) {
                        const tailX = ss.x - Math.cos(ss.angle) * ss.len;
                        const tailY = ss.y - Math.sin(ss.angle) * ss.len;
                        const grad = ctx.createLinearGradient(tailX, tailY, ss.x, ss.y);
                        grad.addColorStop(0, `rgba(160, 200, 255, 0)`);
                        grad.addColorStop(1, `rgba(200, 220, 255, ${ss.life * 0.8})`);
                        ctx.beginPath();
                        ctx.moveTo(tailX, tailY);
                        ctx.lineTo(ss.x, ss.y);
                        ctx.strokeStyle = grad;
                        ctx.lineWidth = 1.5;
                        ctx.stroke();
                        // æµæ˜Ÿå¤´éƒ¨äº®ç‚¹
                        ctx.beginPath();
                        ctx.arc(ss.x, ss.y, 2, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(220, 240, 255, ${ss.life})`;
                        ctx.fill();
                    } else {
                        shootingStars.splice(idx, 1);
                    }
                });

                requestAnimationFrame(animate);
            }
            animate();
        }

        /* ========================================
         *  é£˜è½èŠ±ç“£åŠ¨ç”»
         * ======================================== */
        function initPetals() {
            const container = document.getElementById('petalsContainer');
            const PETAL_COUNT = 15;

            function createPetal() {
                const petal = document.createElement('div');
                petal.className = 'petal';

                // éšæœºä½ç½®å’Œå¤§å°
                const left = Math.random() * 100;
                const size = Math.random() * 8 + 8;
                const duration = Math.random() * 8 + 8;
                const delay = Math.random() * 10;
                const swayAmount = (Math.random() - 0.5) * 150;

                petal.style.left = left + '%';
                petal.style.width = size + 'px';
                petal.style.height = (size * 1.3) + 'px';
                petal.style.animationDuration = duration + 's';
                petal.style.animationDelay = delay + 's';

                // éšæœºèŠ±ç“£é¢œè‰²ï¼ˆç¢å†°è“ç³»åˆ—ï¼‰
                const hue = 195 + Math.random() * 20;
                const sat = 70 + Math.random() * 20;
                const light = 75 + Math.random() * 15;
                petal.style.background = `radial-gradient(ellipse at 30% 30%, hsla(${hue}, ${sat}%, ${light}%, 0.9), hsla(${hue}, ${sat}%, ${light - 20}%, 0.4))`;

                container.appendChild(petal);

                // åŠ¨ç”»ç»“æŸåé‡æ–°åˆ›å»º
                petal.addEventListener('animationend', () => {
                    petal.remove();
                    createPetal();
                });

                // è¶…æ—¶æ¸…ç†ï¼ˆé˜²æ­¢åŠ¨ç”»ä¸è§¦å‘ï¼‰
                setTimeout(() => {
                    if (petal.parentNode) {
                        petal.remove();
                        createPetal();
                    }
                }, (duration + delay) * 1000 + 500);
            }

            for (let i = 0; i < PETAL_COUNT; i++) {
                setTimeout(() => createPetal(), i * 600);
            }
        }

        /* ========================================
         *  é¼ æ ‡è·Ÿéšæ˜Ÿå…‰ç²’å­
         * ======================================== */
        function initParticles() {
            const container = document.getElementById('particleContainer');
            let lastTime = 0;
            const THROTTLE = 40; // èŠ‚æµé—´éš”ms

            function createParticle(x, y) {
                const particle = document.createElement('div');
                particle.className = 'particle';

                const size = Math.random() * 6 + 3;
                const offsetX = (Math.random() - 0.5) * 20;
                const offsetY = (Math.random() - 0.5) * 20;

                // é’ç´«æ¸å˜è‰²
                const colors = [
                    'rgba(130, 200, 255, 0.8)',
                    'rgba(160, 140, 220, 0.8)',
                    'rgba(100, 180, 240, 0.8)',
                    'rgba(180, 160, 255, 0.7)',
                    'rgba(140, 220, 255, 0.8)'
                ];
                const color = colors[Math.floor(Math.random() * colors.length)];

                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = (x + offsetX) + 'px';
                particle.style.top = (y + offsetY) + 'px';
                particle.style.background = `radial-gradient(circle, ${color}, transparent)`;
                particle.style.boxShadow = `0 0 ${size}px ${color}`;

                container.appendChild(particle);

                setTimeout(() => particle.remove(), 1000);
            }

            document.addEventListener('mousemove', (e) => {
                const now = Date.now();
                if (now - lastTime < THROTTLE) return;
                lastTime = now;

                for (let i = 0; i < 3; i++) {
                    createParticle(e.clientX, e.clientY);
                }
            });

            // è§¦æ‘¸è®¾å¤‡æ”¯æŒ
            document.addEventListener('touchmove', (e) => {
                const now = Date.now();
                if (now - lastTime < THROTTLE) return;
                lastTime = now;

                const touch = e.touches[0];
                for (let i = 0; i < 2; i++) {
                    createParticle(touch.clientX, touch.clientY);
                }
            }, { passive: true });
        }

        /* ========================================
         *  æ‰“å­—æœºæ•ˆæœ
         * ======================================== */
        function initTypewriter() {
            const textEl = document.getElementById('typewriterText');
            let phraseIndex = 0;
            let charIndex = 0;
            let isDeleting = false;

            function type() {
                const currentPhrase = typewriterPhrases[phraseIndex];

                if (!isDeleting) {
                    // æ‰“å­—
                    textEl.textContent = currentPhrase.substring(0, charIndex + 1);
                    charIndex++;

                    if (charIndex === currentPhrase.length) {
                        // æ‰“å®Œä¸€å¥ï¼Œåœé¡¿åå¼€å§‹åˆ é™¤
                        setTimeout(() => {
                            isDeleting = true;
                            type();
                        }, 2500);
                        return;
                    }
                    setTimeout(type, 150);
                } else {
                    // åˆ é™¤
                    textEl.textContent = currentPhrase.substring(0, charIndex - 1);
                    charIndex--;

                    if (charIndex === 0) {
                        isDeleting = false;
                        phraseIndex = (phraseIndex + 1) % typewriterPhrases.length;
                        setTimeout(type, 500);
                        return;
                    }
                    setTimeout(type, 80);
                }
            }

            setTimeout(type, 2000);
        }

        /* ========================================
         *  æƒ…äººèŠ‚å€’è®¡æ—¶
         * ======================================== */
        function initCountdown() {
            const daysEl = document.getElementById('cdDays');
            const hoursEl = document.getElementById('cdHours');
            const minsEl = document.getElementById('cdMins');
            const secsEl = document.getElementById('cdSecs');
            const label = document.querySelector('.countdown-label');
            const units = document.querySelectorAll('.countdown-unit');

            // æƒ…äººèŠ‚å½“å¤©çš„èµ·æ­¢æ—¶é—´
            const vStart = new Date('2026-02-14T00:00:00');
            const vEnd = new Date('2026-02-15T00:00:00');

            function update() {
                const now = new Date();

                if (now < vStart) {
                    // ---- æƒ…äººèŠ‚ä¹‹å‰ï¼šæ­£å¸¸å€’è®¡æ—¶ ----
                    units.forEach(function(u) { u.style.display = ''; });
                    label.textContent = 'â€” è·ç¦»æƒ…äººèŠ‚ â€”';
                    const diff = vStart - now;
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const secs = Math.floor((diff % (1000 * 60)) / 1000);
                    daysEl.textContent = days;
                    hoursEl.textContent = String(hours).padStart(2, '0');
                    minsEl.textContent = String(mins).padStart(2, '0');
                    secsEl.textContent = String(secs).padStart(2, '0');
                } else if (now < vEnd) {
                    // ---- æƒ…äººèŠ‚å½“å¤©ï¼šæ˜¾ç¤ºé¸£ç’¨å®å® ----
                    label.textContent = 'â€” æƒ…äººèŠ‚å¿«ä¹ â€”';
                    units.forEach(function(u) { u.style.display = 'none'; });
                    daysEl.textContent = 'é¸£';
                    hoursEl.textContent = 'ç’¨';
                    minsEl.textContent = 'å®';
                    secsEl.textContent = 'å®';
                } else {
                    // ---- æƒ…äººèŠ‚ä¹‹åï¼šæ˜¾ç¤ºå·²è¿‡å»çš„æ—¶é—´ ----
                    units.forEach(function(u) { u.style.display = ''; });
                    label.textContent = 'â€” è·ç¬¬1ä¸ªæƒ…äººèŠ‚å·²è¿‡ â€”';
                    const elapsed = now - vStart;
                    const days = Math.floor(elapsed / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((elapsed % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const mins = Math.floor((elapsed % (1000 * 60 * 60)) / (1000 * 60));
                    const secs = Math.floor((elapsed % (1000 * 60)) / 1000);
                    daysEl.textContent = days;
                    hoursEl.textContent = String(hours).padStart(2, '0');
                    minsEl.textContent = String(mins).padStart(2, '0');
                    secsEl.textContent = String(secs).padStart(2, '0');
                }
            }

            update();
            setInterval(update, 1000);
        }

        /* ========================================
         *  éŸ³æ•ˆæ’­æ”¾å·¥å…·
         * ======================================== */
        function playSfx(src, volume) {
            var a = new Audio(src);
            a.volume = volume || 0.5;
            a.play().catch(function(){});
        }

        /* ========================================
         *  å¡ç‰‡æ‚¬æµ®éŸ³æ•ˆ
         * ======================================== */
        function initCardSounds() {
            const cards = document.querySelectorAll('.glass-card');
            const soundMap = [
                'mp3/èŸ‹èŸ€éŸ³æ•ˆ.mp3',
                'mp3/å¹³é™çš„æµ·æ»©æµ·æµª.mp3',
                'mp3/é£é“ƒéŸ³æ•ˆ.mp3'
            ];
            cards.forEach(function(card, idx) {
                if (soundMap[idx]) {
                    card.addEventListener('mouseenter', function() {
                        playSfx(soundMap[idx], 0.45);
                    });
                }
            });
        }

        /* ========================================
         *  æƒŠå–œå¼¹çª—
         * ======================================== */
        function initSurprise() {
            const btn = document.getElementById('surpriseBtn');
            const overlay = document.getElementById('modalOverlay');
            const closeBtn = document.getElementById('modalClose');
            const modalText = document.getElementById('modalText');

            btn.addEventListener('click', () => {
                playSfx('mp3/ç¿»ä¹¦éŸ³æ•ˆ.mp3', 0.5);
                // éšæœºé€‰æ‹©ä¸€å¥æƒ…è¯
                const randomText = surpriseTexts[Math.floor(Math.random() * surpriseTexts.length)];
                modalText.innerHTML = randomText;
                overlay.classList.add('active');
            });

            closeBtn.addEventListener('click', () => {
                overlay.classList.remove('active');
            });

            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    overlay.classList.remove('active');
                }
            });
        }

        /* ========================================
         *  é•¿æŒ‰å½©è›‹
         * ======================================== */
        function initEasterEgg() {
            const zone = document.getElementById('easterEggZone');
            const content = document.getElementById('easterEggContent');
            let pressTimer = null;
            let isShowing = false;

            function showEgg() {
                playSfx('mp3/ç§‘å¹»ç‚¹å‡»åé•¿éŸ³æ•ˆ.mp3', 0.5);
                content.classList.add('show');
                isShowing = true;
            }

            function hideEgg() {
                content.classList.remove('show');
                isShowing = false;
            }

            // é¼ æ ‡é•¿æŒ‰
            zone.addEventListener('mousedown', (e) => {
                e.preventDefault();
                pressTimer = setTimeout(showEgg, 800);
            });

            zone.addEventListener('mouseup', () => {
                clearTimeout(pressTimer);
            });

            zone.addEventListener('mouseleave', () => {
                clearTimeout(pressTimer);
            });

            // è§¦æ‘¸é•¿æŒ‰
            zone.addEventListener('touchstart', (e) => {
                e.preventDefault();
                pressTimer = setTimeout(showEgg, 800);
            }, { passive: false });

            zone.addEventListener('touchend', () => {
                clearTimeout(pressTimer);
            });

            // ç‚¹å‡»å…¶ä»–åŒºåŸŸå…³é—­å½©è›‹
            document.addEventListener('click', (e) => {
                if (isShowing && !content.contains(e.target) && !zone.contains(e.target)) {
                    hideEgg();
                }
            });

            document.addEventListener('touchstart', (e) => {
                if (isShowing && !content.contains(e.target) && !zone.contains(e.target)) {
                    hideEgg();
                }
            }, { passive: true });
        }

        /* ========================================
         *  ç‚¹å‡»ç«ç‘° - çˆ±å¿ƒ+èŠ±ç“£çˆ†ç ´ + å¡å†œé’¢ç´æ¼”å¥
         * ======================================== */
        function initRoseClick() {
            const roseWrapper = document.getElementById('roseWrapper');

            // è‡´çˆ±ä¸½ä¸ FÃ¼r Elise ç®€åŒ–å•éŸ³ç‰ˆ
            // æ¯ç‚¹ä¸€æ¬¡ç«ç‘°å¼¹ä¸€ä¸ªéŸ³ï¼Œå°ç™½ä¹Ÿèƒ½è½»æ¾å¼¹å‡ºè‡´çˆ±ä¸½ä¸
            const canonNotes = [
                // ===== ä¸»é¢˜ï¼ˆæœ€ç»å…¸çš„å¼€å¤´ï¼‰ =====
                'p_56_e5',   // E5
                'p_55_dz5',  // D#5
                'p_56_e5',   // E5
                'p_55_dz5',  // D#5
                'p_56_e5',   // E5
                'p_51_b4',   // B4
                'p_54_d5',   // D5
                'p_52_c5',   // C5
                'p_49_a4',   // A4  (ç¬¬ä¸€å¥ç»“æŸ)

                // ===== ä½éŸ³è¡”æ¥ =====
                'p_40_c4',   // C4
                'p_44_e4',   // E4
                'p_49_a4',   // A4
                'p_51_b4',   // B4  (ç¬¬äºŒå¥ç»“æŸ)

                // ===== å›åˆ°ä¸»é¢˜åŠ¨æœº =====
                'p_44_e4',   // E4
                'p_48_gz4',  // G#4
                'p_51_b4',   // B4
                'p_52_c5',   // C5  (ç¬¬ä¸‰å¥ç»“æŸ)

                // ===== ä¸»é¢˜å†ç° =====
                'p_44_e4',   // E4
                'p_56_e5',   // E5
                'p_55_dz5',  // D#5
                'p_56_e5',   // E5
                'p_55_dz5',  // D#5
                'p_56_e5',   // E5
                'p_51_b4',   // B4
                'p_54_d5',   // D5
                'p_52_c5',   // C5
                'p_49_a4',   // A4  (ç¬¬å››å¥ç»“æŸ)

                // ===== ä½éŸ³è¡”æ¥ï¼ˆé‡å¤ï¼‰ =====
                'p_40_c4',   // C4
                'p_44_e4',   // E4
                'p_49_a4',   // A4
                'p_51_b4',   // B4  (ç¬¬äº”å¥ç»“æŸ)

                // ===== æ”¶å°¾ä¹å¥ =====
                'p_44_e4',   // E4
                'p_52_c5',   // C5
                'p_51_b4',   // B4
                'p_49_a4',   // A4  (Aæ®µç»“æŸ)
            ];

            // ---- Web Audio APIï¼šç§»åŠ¨ç«¯å¯é æ’­æ”¾ ----
            var pianoCtx = null;
            var bufferCache = {};
            var noteIndex = 0;
            var autoPlayTimer = null;
            var pressTimer = null;
            var isAutoPlaying = false;
            var touchStartTime = 0;
            var longPressTriggered = false;

            function getPianoCtx() {
                if (!pianoCtx) {
                    pianoCtx = new (window.AudioContext || window.webkitAudioContext)();
                }
                if (pianoCtx.state === 'suspended') {
                    pianoCtx.resume();
                }
                return pianoCtx;
            }

            // é¢„åŠ è½½ï¼šfetch + decodeAudioData ç¼“å­˜ä¸º AudioBuffer
            var uniqueNotes = [...new Set(canonNotes)];
            uniqueNotes.forEach(function(note) {
                fetch('piano/' + note + '.mp3')
                    .then(function(r) { return r.arrayBuffer(); })
                    .then(function(buf) {
                        return getPianoCtx().decodeAudioData(buf);
                    })
                    .then(function(decoded) {
                        bufferCache[note] = decoded;
                    })
                    .catch(function(){});
            });

            function playPianoNote() {
                var ctx = getPianoCtx();
                var note = canonNotes[noteIndex % canonNotes.length];
                var buffer = bufferCache[note];
                if (buffer) {
                    var source = ctx.createBufferSource();
                    source.buffer = buffer;
                    var gain = ctx.createGain();
                    gain.gain.value = 0.7;
                    source.connect(gain);
                    gain.connect(ctx.destination);
                    source.start(0);
                }
                noteIndex++;
            }

            function triggerBurst() {
                var rect = roseWrapper.getBoundingClientRect();
                var cx = rect.left + rect.width / 2;
                var cy = rect.top + rect.height / 2;
                createBurst(cx, cy);
            }

            function onTap() {
                if (isAutoPlaying) return;
                playPianoNote();
                triggerBurst();
            }

            function startAutoPlay() {
                isAutoPlaying = true;
                noteIndex = 0;
                var totalNotes = canonNotes.length;
                playPianoNote();
                triggerBurst();
                var played = 1;
                autoPlayTimer = setInterval(function() {
                    if (played >= totalNotes) {
                        clearInterval(autoPlayTimer);
                        autoPlayTimer = null;
                        isAutoPlaying = false;
                        noteIndex = 0;
                        return;
                    }
                    playPianoNote();
                    triggerBurst();
                    played++;
                }, 320);
            }

            function cancelPress() {
                if (pressTimer) {
                    clearTimeout(pressTimer);
                    pressTimer = null;
                }
            }

            // é˜²æ­¢é•¿æŒ‰è§¦å‘æ–‡æœ¬é€‰æ‹©ï¼ˆçº¯CSSæ–¹å¼ï¼Œä¸å½±å“äº‹ä»¶ï¼‰
            roseWrapper.style.userSelect = 'none';
            roseWrapper.style.webkitUserSelect = 'none';
            roseWrapper.style.webkitTouchCallout = 'none';

            // ---- æ¡Œé¢ç«¯ï¼šmousedown/mouseup/click ----
            roseWrapper.addEventListener('mousedown', function() {
                if (isAutoPlaying) return;
                pressTimer = setTimeout(function() {
                    pressTimer = null;
                    startAutoPlay();
                }, 800);
            });
            roseWrapper.addEventListener('mouseup', cancelPress);
            roseWrapper.addEventListener('mouseleave', cancelPress);
            roseWrapper.addEventListener('click', function(e) {
                if (isAutoPlaying) return;
                onTap();
            });

            // ---- ç§»åŠ¨ç«¯ï¼štouchstart/touchend æ‰‹åŠ¨åˆ¤æ–­ç‚¹å‡»/é•¿æŒ‰ ----
            roseWrapper.addEventListener('touchstart', function(e) {
                // åˆå§‹åŒ–AudioContextï¼ˆç§»åŠ¨ç«¯éœ€è¦ç”¨æˆ·æ‰‹åŠ¿ï¼‰
                getPianoCtx();
                longPressTriggered = false;
                touchStartTime = Date.now();
                if (isAutoPlaying) return;
                pressTimer = setTimeout(function() {
                    pressTimer = null;
                    longPressTriggered = true;
                    startAutoPlay();
                }, 800);
            }, { passive: true });

            roseWrapper.addEventListener('touchend', function(e) {
                cancelPress();
                // çŸ­æŒ‰ = ç‚¹å‡»å¼¹ä¸€ä¸ªéŸ³
                if (!longPressTriggered && !isAutoPlaying && (Date.now() - touchStartTime < 800)) {
                    e.preventDefault(); // ä»…åœ¨çŸ­æŒ‰æ—¶é˜»æ­¢ï¼Œé˜²æ­¢è§¦å‘é¢å¤–click
                    onTap();
                }
            });
            roseWrapper.addEventListener('touchcancel', cancelPress);

            // é˜»æ­¢é•¿æŒ‰å¼¹å‡ºä¸Šä¸‹æ–‡èœå•
            roseWrapper.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
        }

        function createBurst(cx, cy) {
            const PARTICLE_COUNT = 20;

            for (let i = 0; i < PARTICLE_COUNT; i++) {
                const el = document.createElement('div');
                el.className = 'burst-particle';

                // éšæœºæ–¹å‘
                const angle = (Math.PI * 2 * i) / PARTICLE_COUNT + (Math.random() - 0.5) * 0.5;
                const distance = 60 + Math.random() * 100;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance - 30;
                const rot = Math.random() * 720 - 360;

                el.style.left = cx + 'px';
                el.style.top = cy + 'px';
                el.style.setProperty('--tx', tx + 'px');
                el.style.setProperty('--ty', ty + 'px');
                el.style.setProperty('--rot', rot + 'deg');

                // äº¤æ›¿çˆ±å¿ƒå’ŒèŠ±ç“£
                if (i % 3 === 0) {
                    el.innerHTML = '<span class="burst-heart">â™¥</span>';
                    // ç¢å†°è“æ¸å˜è‰²
                    const hue = 195 + Math.random() * 30;
                    el.querySelector('.burst-heart').style.color = `hsl(${hue}, 80%, 75%)`;
                    el.querySelector('.burst-heart').style.textShadow = `0 0 10px hsla(${hue}, 80%, 75%, 0.6)`;
                    el.querySelector('.burst-heart').style.fontSize = (16 + Math.random() * 12) + 'px';
                } else {
                    const petal = document.createElement('div');
                    petal.className = 'burst-petal-piece';
                    const size = 6 + Math.random() * 8;
                    petal.style.width = size + 'px';
                    petal.style.height = (size * 1.4) + 'px';
                    const hue = 195 + Math.random() * 30;
                    petal.style.background = `linear-gradient(135deg, hsla(${hue}, 80%, 75%, 0.9), hsla(${hue + 30}, 60%, 65%, 0.6))`;
                    el.appendChild(petal);
                }

                document.body.appendChild(el);

                // åŠ¨ç”»ç»“æŸåç§»é™¤
                setTimeout(() => el.remove(), 1300);
            }
        }

        /* ========================================
         *  èƒŒæ™¯éŸ³ä¹æ§åˆ¶
         * ======================================== */
        function initMusic() {
            const audio = document.getElementById('bgMusic');
            const btn = document.getElementById('musicBtn');
            const icon = btn.querySelector('.music-icon');
            let isPlaying = false;

            // å°è¯•è‡ªåŠ¨æ’­æ”¾
            function tryAutoPlay() {
                audio.volume = 0.3;
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        isPlaying = true;
                        btn.classList.add('playing');
                        icon.textContent = 'â™ª';
                    }).catch(() => {
                        // è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œç­‰å¾…ç”¨æˆ·äº¤äº’
                        isPlaying = false;
                        btn.classList.remove('playing');
                        icon.textContent = 'â™ª';
                    });
                }
            }

            // é¡µé¢åŠ è½½åå°è¯•è‡ªåŠ¨æ’­æ”¾
            setTimeout(tryAutoPlay, 1500);

            // ç”¨æˆ·é¦–æ¬¡äº¤äº’æ—¶å°è¯•æ’­æ”¾
            document.addEventListener('click', function firstClick() {
                if (!isPlaying) {
                    tryAutoPlay();
                }
                document.removeEventListener('click', firstClick);
            }, { once: false });

            // éŸ³ä¹æŒ‰é’®åˆ‡æ¢
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                if (isPlaying) {
                    audio.pause();
                    isPlaying = false;
                    btn.classList.remove('playing');
                    icon.textContent = 'â™ª';
                } else {
                    audio.volume = 0.3;
                    audio.play().then(() => {
                        isPlaying = true;
                        btn.classList.add('playing');
                        icon.textContent = 'â™ª';
                    }).catch(() => {});
                }
            });
        }
    </script>
</body>
</html>
